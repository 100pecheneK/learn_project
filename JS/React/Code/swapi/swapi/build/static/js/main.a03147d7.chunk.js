(this.webpackJsonpswapi=this.webpackJsonpswapi||[]).push([[0],{36:function(e,t,a){e.exports=a(54)},45:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a.n(n),c=a(0),o=a.n(c),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function i(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var s=a(3),u=a(5),m=a(9),p=a(7),d=a(10),f=a(8),h=function(e){var t=e.onServiceChange;return o.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark elegant-color-dark"},o.a.createElement(f.b,{to:"/",className:"navbar-brand",href:"/"},"Swapi"),o.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},o.a.createElement("ul",{className:"navbar-nav"},o.a.createElement(f.b,{to:"/people/",className:"list-group-item list-group-item-action elegant-color"},"People"),o.a.createElement(f.b,{to:"/planets/",className:"list-group-item list-group-item-action elegant-color"},"Planets"),o.a.createElement(f.b,{to:"/starships/",className:"list-group-item list-group-item-action elegant-color"},"Starships"),o.a.createElement("button",{className:"list-group-item list-group-item-action elegant-color-dark",onClick:t},"Change Service"),o.a.createElement("a",{href:"https://vk.com/mistermihail23",className:"list-group-item list-group-item-action elegant-color-dark"},"Developer"))))},g=(a(45),function(){return o.a.createElement("div",{className:"col-12 py-2 d-flex justify-content-center"},o.a.createElement("div",{className:"preloader-wrapper small active"},o.a.createElement("div",{className:"spinner-layer spinner-red-only spinner-color-white"},o.a.createElement("div",{className:"circle-clipper left"},o.a.createElement("div",{className:"circle"})),o.a.createElement("div",{className:"gap-patch"},o.a.createElement("div",{className:"circle"})),o.a.createElement("div",{className:"circle-clipper right"},o.a.createElement("div",{className:"circle"})))))}),v=function(){return o.a.createElement("div",{className:"col-12"},o.a.createElement("div",{className:"alert alert-danger m-0",role:"alert"},o.a.createElement("p",null,"Something has gone terribly wrong, but ",o.a.createElement("b",null,"we already sent droids to fix it!")),o.a.createElement("p",null,"(Please, try to reload this page)")))},E=function(e){var t=e.content;return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-md-6"},o.a.createElement("div",{className:"jumbotron jumbotron-fluid mt-3 elegant-color-dark p-0"},t))))},b=function(e){var t=e.contentDetail,a=o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row py-3 text-white"},t));return o.a.createElement(E,{content:a})},w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={hasError:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?o.a.createElement(v,null):this.props.children}}]),t}(c.Component),y=a(1),N=a.n(y),j=a(35),S=a(33),x=function e(){var t=this;Object(s.a)(this,e),this._apiBase="http://localhost:8000/api/v1",this._imageBase="http://localhost:8000/media/image",this._transformData=function(e){var t=e.id,a=Object(S.a)(e,["id"]);return Object(j.a)({id:t.toString()},a)},this.getResource=function(e){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(fetch("".concat(t._apiBase).concat(e)));case 2:if((a=n.sent).ok){n.next=5;break}throw new Error("Could not fetch ".concat(t._apiBase).concat(e,", received ").concat(a.status));case 5:return n.next=7,N.a.awrap(a.json());case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}}))},this.getAllPeople=function(){var e;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(t.getResource("/people/"));case 2:return e=a.sent,a.abrupt("return",e.map(t._transformData));case 4:case"end":return a.stop()}}))},this.getPerson=function(e){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(t.getResource("/people/".concat(e,"/")));case 2:return a=n.sent,n.abrupt("return",t._transformData(a));case 4:case"end":return n.stop()}}))},this.getPersonImage=function(e){var a=e.id;return"".concat(t._imageBase,"/people/").concat(a,".jpg")},this.getALlPlanets=function(){var e;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(t.getResource("/planets/"));case 2:return e=a.sent,a.abrupt("return",e.map(t._transformData));case 4:case"end":return a.stop()}}))},this.getPlanet=function(e){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(t.getResource("/planets/".concat(e,"/")));case 2:return a=n.sent,n.abrupt("return",t._transformData(a));case 4:case"end":return n.stop()}}))},this.getPlanetImage=function(e){var a=e.id;return"".concat(t._imageBase,"/planets/").concat(a,".jpg")},this.getALlStarships=function(){var e;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(t.getResource("/starships/"));case 2:return e=a.sent,a.abrupt("return",e.map(t._transformData));case 4:case"end":return a.stop()}}))},this.getStarship=function(e){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(t.getResource("/starships/".concat(e,"/")));case 2:return a=n.sent,n.abrupt("return",t._transformData(a));case 4:case"end":return n.stop()}}))},this.getStarshipImage=function(e){var a=e.id;return"".concat(t._imageBase,"/starships/").concat(a,".jpg")}},P=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={planet:null,loading:!0},a.swapiService=new x,a.onPlanetLoaded=function(e){a.setState({planet:e,loading:!1})},a.onError=function(e){a.setState({error:!0,loading:!1})},a.updatePlanet=function(){var e=Math.floor(5*Math.random())+1;a.swapiService.getPlanet(e).then(a.onPlanetLoaded).catch(a.onError)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.updateInterval;this.updatePlanet(),this.interval=setInterval(this.updatePlanet,e)}},{key:"render",value:function(){var e=this.state,t=e.planet,a=e.loading,n=e.error,r=!(a||n),c=n?o.a.createElement(v,null):null,l=a?o.a.createElement(g,null):null,i=r?o.a.createElement(I,{planet:t}):null,s=o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"col-12"},o.a.createElement("h2",null,"Random planet")),c,l,i);return o.a.createElement(w,null,o.a.createElement(b,{contentDetail:s}))}}]),t}(c.Component);P.defaultProps={updateInterval:3e3};var I=function(e){var t=e.planet,a=t.id,n=t.name,r=t.population,c=t.rotationPeriod,l=t.diameter;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"col-12 col-md-4 d-flex align-items-center justify-content-center"},o.a.createElement("img",{src:"http://localhost:8000/media/image/planets/".concat(a,".jpg"),alt:"",className:"img img-fluid rounded z-depth-1"})),o.a.createElement("div",{className:"col-12 col-md-8"},o.a.createElement("h2",{className:"display-5"},n)),o.a.createElement("div",{className:"col-12 mt-3"},o.a.createElement("ul",{className:"list-group list-group-flush"},o.a.createElement("li",{className:"list-group-item elegant-color"},"Population ",r),o.a.createElement("li",{className:"list-group-item elegant-color"},"Rotation Period ",c),o.a.createElement("li",{className:"list-group-item elegant-color"},"Diameter ",l))))},O=P,k=function(){function e(){var t=this;Object(s.a)(this,e),this._apiBase="https://swapi.co/api",this._imageBase="https://starwars-visualguide.com/assets/img",this.getResource=function(e){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(fetch("".concat(t._apiBase).concat(e)));case 2:if((a=n.sent).ok){n.next=5;break}throw new Error("Could not fetch ".concat(t._apiBase).concat(e,", received ").concat(a.status));case 5:return n.next=7,N.a.awrap(a.json());case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}}))},this.getAllPeople=function(){var e;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(t.getResource("/people/"));case 2:return e=a.sent,a.abrupt("return",e.results.map(t._transformPerson));case 4:case"end":return a.stop()}}))},this.getPerson=function(e){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(t.getResource("/people/".concat(e)));case 2:return a=n.sent,n.abrupt("return",t._transformPerson(a));case 4:case"end":return n.stop()}}))},this.getPersonImage=function(e){var a=e.id;return"".concat(t._imageBase,"/characters/").concat(a,".jpg")},this._transformPerson=function(e){return{id:t._extractId(e),name:e.name,gender:e.gender,birthYear:e.birth_year,eyeColor:e.eye_color}},this.getALlPlanets=function(){var e;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(t.getResource("/planets/"));case 2:return e=a.sent,a.abrupt("return",e.results.map(t._transformPlanet));case 4:case"end":return a.stop()}}))},this.getPlanet=function(e){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(t.getResource("/planets/".concat(e)));case 2:return a=n.sent,n.abrupt("return",t._transformPlanet(a));case 4:case"end":return n.stop()}}))},this.getPlanetImage=function(e){var a=e.id;return"".concat(t._imageBase,"/planes/").concat(a,".jpg")},this._transformPlanet=function(e){return{id:t._extractId(e),name:e.name,population:e.population,rotationPeriod:e.rotation_period,diameter:e.diameter}},this.getALlStarships=function(){var e;return N.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.awrap(t.getResource("/starships/"));case 2:return e=a.sent,a.abrupt("return",e.results.map(t._transformStarship));case 4:case"end":return a.stop()}}))},this.getStarship=function(e){var a;return N.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.awrap(t.getResource("/starships/".concat(e)));case 2:return a=n.sent,n.abrupt("return",t._transformStarship(a));case 4:case"end":return n.stop()}}))},this.getStarshipImage=function(e){var a=e.id;return"".concat(t._imageBase,"/starships/").concat(a,".jpg")},this._transformStarship=function(e){return{id:t._extractId(e),name:e.name,model:e.model,manufacturer:e.manufacturer}}}return Object(u.a)(e,[{key:"_extractId",value:function(e){return e.url.match(/\/([0-9]*)\/$/)[1]}}]),e}(),_=o.a.createContext(),D=_.Provider,C=_.Consumer,A=function(){return o.a.createElement("div",{className:"col-8"},o.a.createElement("h4",{className:"display-5"},"Select an item from a list"))},R=function(e){var t=e.item,a=e.field,n=e.label;return o.a.createElement("li",{className:"list-group-item elegant-color"},n," ",t[a])},B=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={item:null,image:null,loading:!0},a.onItemLoaded=function(e){a.setState({item:e,image:a.props.getImageUrl(e),loading:!1})},a.onError=function(e){console.log("\ud83d\udca9\ud83d\udca9\ud83d\udca9"),console.log(e),a.setState({error:!0,loading:!1})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.updateItem()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.itemId===e.itemId&&this.props.getData===e.getData&&this.props.getImageUrl===e.getImageUrl||(this.setState({loading:!0}),this.updateItem())}},{key:"updateItem",value:function(){var e=this.props,t=e.itemId,a=e.getData;t?(this.setState({item:!0,image:!0}),a(t).then(this.onItemLoaded).catch(this.onError)):this.setState({item:null,image:null,needToShow:!1})}},{key:"render",value:function(){var e=this.state,t=e.item,a=e.image,n=e.loading,r=e.error;if(!t)return o.a.createElement(b,{contentDetail:o.a.createElement(A,null)});var c=!(r||n),l=r?o.a.createElement(v,null):null,i=n?o.a.createElement(g,null):null,s=c?o.a.createElement(L,{item:t,image:a,children:this.props.children}):null,u=o.a.createElement(o.a.Fragment,null,l,i,s);return o.a.createElement(b,{contentDetail:u})}}]),t}(c.Component),L=function(e){var t=e.item,a=e.image,n=e.children;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"col-4 d-flex align-items-center justify-content-center"},o.a.createElement("img",{src:a,alt:"",className:"img img-fluid rounded z-depth-1"})),o.a.createElement("div",{className:"col-8"},o.a.createElement("h2",{className:"display-5"},t.name)),o.a.createElement("div",{className:"col-12 mt-3"},o.a.createElement("ul",{className:"list-group list-group-flush"},o.a.Children.map(n,(function(e){return o.a.cloneElement(e,{item:t})})))))},U=B,W=function(e){return function(t){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=Object(m.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).state={data:null,loading:!0,error:!1},t.onItemListLoaded=function(e){t.setState({data:e,loading:!1})},t.onError=function(e){t.setState({error:!0,loading:!1})},t}return Object(d.a)(a,t),Object(u.a)(a,[{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(e){this.props.getData!==e.getData&&this.update()}},{key:"update",value:function(){this.props.getData().then(this.onItemListLoaded).catch(this.onError)}},{key:"render",value:function(){var t=this.state,a=t.data,n=t.error;return t.loading?o.a.createElement(b,{contentDetail:o.a.createElement(g,null)}):n?o.a.createElement(b,{contentDetail:o.a.createElement(v,null)}):o.a.createElement(e,Object.assign({},this.props,{data:a}))}}]),a}(c.Component)},M=function(e){return function(t){return function(a){return o.a.createElement(C,null,(function(n){var r=e(n);return o.a.createElement(t,Object.assign({},a,r))}))}}},F=function(e){return function(t){return function(a){return o.a.createElement(t,a,e)}}},T=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},z=M((function(e){return{getData:e.getPerson,getImageUrl:e.getPersonImage}}))((function(e){return o.a.createElement(U,e,o.a.createElement(R,{field:"gender",label:"Gender"}),o.a.createElement(R,{field:"eyeColor",label:"Eye color"}),o.a.createElement(R,{field:"birthYear",label:"Birth year"}))})),J=M((function(e){return{getData:e.getPlanet,getImageUrl:e.getPlanetImage}}))((function(e){return o.a.createElement(U,e,o.a.createElement(R,{field:"name",label:"Name"}),o.a.createElement(R,{field:"population",label:"Population"}),o.a.createElement(R,{field:"rotationPeriod",label:"Rotation period"}),o.a.createElement(R,{field:"diameter",label:"Diameter"}))})),Y=M((function(e){return{getData:e.getStarship,getImageUrl:e.getStarshipImage}}))((function(e){return o.a.createElement(U,e,o.a.createElement(R,{field:"name",label:"Name"}),o.a.createElement(R,{field:"model",label:"Model"}),o.a.createElement(R,{field:"manufacturer",label:"Manufacturer"}))})),$=function(e){var t=e.data,a=e.onItemSelected,n=e.children,r=t?t.map((function(e){var t=e.id,r=n(e);return o.a.createElement("button",{type:"button",className:"list-group-item list-group-item-action elegant-color",key:t,onClick:function(){a(t)}},r)})):null;return o.a.createElement(E,{content:r})};$.defaultProps={onItemSelected:function(){}};var G=$,q=function(e){var t=e.name;return o.a.createElement("span",null,t)},H=T(M((function(e){return{getData:e.getAllPeople}})),W,F(q))(G),K=T(M((function(e){return{getData:e.getALlPlanets}})),W,F(q))(G),Q=T(M((function(e){return{getData:e.getALlStarships}})),W,F((function(e){var t=e.model,a=e.name;return o.a.createElement("span",null,a," [",t,"]")})))(G),V=a(14),X=a(34),Z=function(){X.animateScroll.scrollToTop()},ee=Object(V.e)((function(e){var t,a=e.history,n=e.match.params.id;return t=n,Object(c.useEffect)((function(){Z()}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement(z,{itemId:n}),o.a.createElement(H,{onItemSelected:function(e){return a.push(e)}}))})),te=Object(V.e)((function(e){var t,a=e.history,n=e.match.params.id;return t=n,Object(c.useEffect)((function(){Z()}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement(J,{itemId:n}),o.a.createElement(K,{onItemSelected:function(e){return a.push(e)}}))})),ae=Object(V.e)((function(e){var t,a=e.history,n=e.match.params.id;return t=n,Object(c.useEffect)((function(){Z()}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Y,{itemId:n}),o.a.createElement(Q,{onItemSelected:function(e){return a.push(e)}}))})),ne=function(){var e=o.a.createElement("div",{className:"col"},o.a.createElement("h3",null,"Welcome to SWAPI!"),o.a.createElement("p",null,"Select people, planets or\xa0starships category!"),o.a.createElement("img",{className:"img",src:"http://127.0.0.1:8000/media/image/welcome/welcome-page.jpg"}));return o.a.createElement(b,{contentDetail:e})},re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={selectedItem:Math.floor(10*Math.random())+1,swapiService:new x},a.onServiceChange=function(){a.setState((function(e){return{swapiService:new(e.swapiService instanceof k?x:k)}}))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(w,null,o.a.createElement(D,{value:this.state.swapiService},o.a.createElement(f.a,null,o.a.createElement(h,{onServiceChange:this.onServiceChange}),o.a.createElement(V.a,{path:"/",render:function(){return o.a.createElement(ne,null)},exact:!0}),o.a.createElement(V.a,{path:"/people/:id?",component:ee}),o.a.createElement(V.a,{path:"/planets/:id?",component:te}),o.a.createElement(V.a,{path:"/starships/:id?",component:ae}),o.a.createElement(O,{updateInterval:1e4}))))}}]),t}(c.Component);r.a.render(o.a.createElement(re,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):i(t,e)}))}}()}},[[36,1,2]]]);
//# sourceMappingURL=main.a03147d7.chunk.js.map