{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/misha/Documents/learn_project/JS/next-authenticated-todo-app/contexts/TodosContext.js\";\nimport { createContext, useState, useRef } from 'react';\nconst TodosContext = /*#__PURE__*/createContext();\n\nconst TodosProvider = ({\n  children\n}) => {\n  const {\n    0: todos,\n    1: setTodos\n  } = useState([]);\n\n  const refreshTodos = async () => {\n    try {\n      const res = await fetch('/api/getTodos');\n      const latestTodos = await res.json();\n      setTodos(latestTodos);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const addTodo = async description => {\n    try {\n      const res = await fetch('/api/createTodo', {\n        method: 'POST',\n        body: JSON.stringify({\n          description\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const newTodo = await res.json();\n      console.log(newTodo);\n      setTodos(prevTodos => [newTodo, ...prevTodos]);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const updateTodo = async updatedTodo => {\n    try {\n      await fetch('/api/updateTodo', {\n        method: 'PUT',\n        body: JSON.stringify(updatedTodo),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      setTodos(prevTodos => {\n        const existingTodos = [...prevTodos];\n        const existingTodo = existingTodos.find(todo => todo.id === updatedTodo.id);\n        existingTodo.fields = updatedTodo.fields;\n        return existingTodos;\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const deleteTodo = async id => {\n    try {\n      await fetch('/api/deleteTodo', {\n        method: 'DELETE',\n        body: JSON.stringify({\n          id\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      setTodos(prevTodos => prevTodos.filter(todo => todo.id !== id));\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(TodosContext.Provider, {\n    value: {\n      todos,\n      setTodos,\n      refreshTodos,\n      updateTodo,\n      addTodo,\n      deleteTodo\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\nexport { TodosProvider, TodosContext };","map":{"version":3,"sources":["/Users/misha/Documents/learn_project/JS/next-authenticated-todo-app/contexts/TodosContext.js"],"names":["createContext","useState","useRef","TodosContext","TodosProvider","children","todos","setTodos","refreshTodos","res","fetch","latestTodos","json","e","console","error","addTodo","description","method","body","JSON","stringify","headers","newTodo","log","prevTodos","updateTodo","updatedTodo","existingTodos","existingTodo","find","todo","id","fields","deleteTodo","filter"],"mappings":"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","sourcesContent":["import { createContext, useState, useRef } from 'react'\nconst TodosContext = createContext()\n\nconst TodosProvider = ({ children }) => {\n  const [todos, setTodos] = useState([])\n\n  const refreshTodos = async () => {\n    try {\n      const res = await fetch('/api/getTodos')\n      const latestTodos = await res.json()\n      setTodos(latestTodos)\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  const addTodo = async description => {\n    try {\n      const res = await fetch('/api/createTodo', {\n        method: 'POST',\n        body: JSON.stringify({ description }),\n        headers: { 'Content-Type': 'application/json' },\n      })\n      const newTodo = await res.json()\n      console.log(newTodo)\n      setTodos(prevTodos => [newTodo, ...prevTodos])\n    } catch (e) {\n      console.error(e)\n    }\n  }\n  const updateTodo = async updatedTodo => {\n    try {\n      await fetch('/api/updateTodo', {\n        method: 'PUT',\n        body: JSON.stringify(updatedTodo),\n        headers: { 'Content-Type': 'application/json' },\n      })\n      setTodos(prevTodos => {\n        const existingTodos = [...prevTodos]\n        const existingTodo = existingTodos.find(\n          todo => todo.id === updatedTodo.id\n        )\n        existingTodo.fields = updatedTodo.fields\n        return existingTodos\n      })\n    } catch (e) {\n      console.error(e)\n    }\n  }\n  const deleteTodo = async id => {\n    try {\n      await fetch('/api/deleteTodo', {\n        method: 'DELETE',\n        body: JSON.stringify({ id }),\n        headers: { 'Content-Type': 'application/json' },\n      })\n      setTodos(prevTodos => prevTodos.filter(todo => todo.id !== id))\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  return (\n    <TodosContext.Provider\n      value={{ todos, setTodos, refreshTodos, updateTodo, addTodo, deleteTodo }}\n    >\n      {children}\n    </TodosContext.Provider>\n  )\n}\nexport { TodosProvider, TodosContext }\n"]},"metadata":{},"sourceType":"module"}