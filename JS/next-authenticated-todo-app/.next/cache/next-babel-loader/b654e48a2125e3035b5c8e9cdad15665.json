{"ast":null,"code":"const Airtable = require('airtable');\n\nconst base = new Airtable({\n  apiKey: process.env.AIRTABLE_API_KEY\n}).base(process.env.AIRTABLE_BASE_ID);\nconst table = base(process.env.AIRTABLE_TABLE_NAME);\n\nconst minifyRecord = record => {\n  // if (!record.fields?.completed) {\n  //   record.foelds.completed = false\n  // }\n  console.log(records.fields);\n  return {\n    id: record.id,\n    fields: record.fields\n  };\n};\n\nconst minifyRecords = records => {\n  return records.map(minifyRecord);\n};\n\nexport default (async (req, res) => {\n  const records = await table.select({}).firstPage();\n  const minifiedRecords = minifyRecords(records);\n  return res.json(minifiedRecords);\n});","map":{"version":3,"sources":["/Users/misha/Desktop/nextblog/todo/pages/api/getTodos.js"],"names":["Airtable","require","base","apiKey","process","env","AIRTABLE_API_KEY","AIRTABLE_BASE_ID","table","AIRTABLE_TABLE_NAME","minifyRecord","record","console","log","records","fields","id","minifyRecords","map","req","res","select","firstPage","minifiedRecords","json"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,MAAMC,IAAI,GAAG,IAAIF,QAAJ,CAAa;AAAEG,EAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAAtB,CAAb,EAAuDJ,IAAvD,CACXE,OAAO,CAACC,GAAR,CAAYE,gBADD,CAAb;AAIA,MAAMC,KAAK,GAAGN,IAAI,CAACE,OAAO,CAACC,GAAR,CAAYI,mBAAb,CAAlB;;AAEA,MAAMC,YAAY,GAAGC,MAAM,IAAI;AAE7B;AACA;AACA;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACC,MAApB;AACA,SAAO;AACLC,IAAAA,EAAE,EAAEL,MAAM,CAACK,EADN;AAELD,IAAAA,MAAM,EAAEJ,MAAM,CAACI;AAFV,GAAP;AAID,CAVD;;AAYA,MAAME,aAAa,GAAGH,OAAO,IAAI;AAC/B,SAAOA,OAAO,CAACI,GAAR,CAAYR,YAAZ,CAAP;AACD,CAFD;;AAIA,gBAAe,OAAOS,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAMN,OAAO,GAAG,MAAMN,KAAK,CAACa,MAAN,CAAa,EAAb,EAAiBC,SAAjB,EAAtB;AACA,QAAMC,eAAe,GAAGN,aAAa,CAACH,OAAD,CAArC;AACA,SAAOM,GAAG,CAACI,IAAJ,CAASD,eAAT,CAAP;AACD,CAJD","sourcesContent":["const Airtable = require('airtable')\nconst base = new Airtable({ apiKey: process.env.AIRTABLE_API_KEY }).base(\n  process.env.AIRTABLE_BASE_ID\n)\n\nconst table = base(process.env.AIRTABLE_TABLE_NAME)\n\nconst minifyRecord = record => {\n  \n  // if (!record.fields?.completed) {\n  //   record.foelds.completed = false\n  // }\n  console.log(records.fields);\n  return {\n    id: record.id,\n    fields: record.fields,\n  }\n}\n\nconst minifyRecords = records => {\n  return records.map(minifyRecord)\n}\n\nexport default async (req, res) => {\n  const records = await table.select({}).firstPage()\n  const minifiedRecords = minifyRecords(records)\n  return res.json(minifiedRecords)\n}\n"]},"metadata":{},"sourceType":"module"}